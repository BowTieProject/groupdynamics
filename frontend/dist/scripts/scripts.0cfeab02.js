"use strict";function getChartConfig(a,b){console.log("in GetChart confgig"),b.post("/api/getconfig",{url_id:a.url_id}).success(function(b,c,d,e){a.data=b,a.fileUploaded=!0,a.loadingSpinner=!1}).error(function(b,c,d,e){a.fileUploaded=!1,a.loadingSpinner=!1})}angular.module("frontendApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularFileUpload","highcharts-ng"]).config(["$routeProvider","$locationProvider","$compileProvider",function(a,b,c){c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|whatsapp):/),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/:url_id",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("frontendApp").controller("MainCtrl",["$scope","$upload","$routeParams","$location","$http",function(a,b,c,d,e){"undefined"!=typeof c.url_id?(a.loadingSpinner=!1,a.url_id=c.url_id,getChartConfig(a,e),a.encodedUrl=encodeURIComponent("Check our chat stats: http://groupstats.io/#/"+a.url_id),a.feedback=null,a.feedbackSent=!1):(a.url_id=null,a.fileUploaded=!1,a.loadingSpinner=!1),a.feedback=null,a.gotoBottom=function(){var a=d.hash();d.hash("help"),console.log("in scroll function"),$anchorScroll(),d.hash(a)},a.onFileSelect=function(c){a.loadingSpinner=!0,a.selectedFiles=c,a.progress=[];for(var e=0;e<c.length;e++){var f=c[e];a.upload=b.upload({url:"/api/uploadChat",method:"POST",data:{url_id:a.url_id},file:f}).progress(function(b){a.progress[e-1]=Math.min(100,parseInt(100*b.loaded/b.total))}).success(function(b,c,e,f){a.data=b;var g="Nr. of Messages: "+a.data.number_of_messages+"; Nr. of People: "+a.data.number_of_users;ga("send","event","SuccesfullUpload","click",g),console.log("Success"),d.path("/"+b.url_id)}).then(function(){a.selectedFiles=null,a.fileUploaded=!0,setTimeout(function(){$(window).resize()},500)})}},a.sendFeedback=function(){e.post("/api/feedback",{message:a.feedback,url_id:a.url_id}).success(function(b,c,d,e){a.feedbackSent=!0}).error(function(a,b,c,d){console.log(a)})}}]),angular.module("frontendApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/analysis.html","<p>This is the analysis view.</p>"),a.put("views/main.html",'<div class="container-fluid"> <div ng-if="fileUploaded == false"> <div class="row"> <div class="col-md-offset-3 col-md-6 text-center header"> <h1>#<b>group</b>Stats.io </h1> <span id="beta"> BETA </span> <div> <h4>Understand your friends. Analyze your Whatsapp chat history.</h4> </div> <div class="btn bg-primary btn-lg" ng-file-select="onFileSelect($files,$scope)">Upload your Chat </div> <div> <a ng-click="gotoBottom()">How it works</a> / <a href="/#/f3e2ccd8-2206-4d79-a1fb-4ec1eada0ebc">See an example</a> </div> </div> </div> <div ng-if="loadingSpinner == true"> <div class="row"> <div class="col-md-offset-3 col-md-6 text-center header"> <div class="sk-double-bounce"> <div class="sk-child sk-double-bounce1"></div> <div class="sk-child sk-double-bounce2"></div> </div> </div> </div> </div> <!-- Services --> <!-- The circle icons use Font Awesome\'s stacked icon classes. For more information, visit http://fontawesome.io/examples/ --> <div class="services"> <div class="row text-center"> <section id="help"> <div class="col-md-12 text-center bg-primary"> <h2>How it works</h2> <!--<div class="dropdown">--> <!--    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"> Select Device--> <!--        <span class="caret"></span></button>--> <!--    <ul class="dropdown-menu" id="dropdownList" role="menu">--> <!--        <li class="dropdown"><a href="#">Android</a></li>--> <!--        <li class="dropdown"><a href="#">iPhone</a></li>--> <!--    </ul>--> <!--</div>--> <hr class="small"> <div class="row"> <div class="col-md-4 col-sm-12"> <div class="service-item"> <h4> <strong>Step 1: Export from WhatsApp </strong> </h4> <div ng-if="dropdown == Android"> <p> (1) Tap and hold the chat. (2) Select "Email Chat" and choose "Without Media". (3) Send it to your own Email address. </p> </div> </div> </div> <div class="col-md-4 col-sm-12"> <div class="service-item"> <h4> <strong>Step 2: Save to your phone</strong> </h4> <p> Open the email that you sent in Step 1 and save the attached txt file. </p> </div> </div> <div class="col-md-4 col-sm-12"> <div class="service-item"> <h4> <strong>Step 3: Upload to this website</strong> </h4> <p> Upload the text file that you saved in Step 2 to this website. (1) Click the \'Upload your Chat\' button. (2) Select \'Documents\' and (3) choose the txt file. </p> </div> </div> </div> </div> </section></div> <div class="row text-center faq"> <div class="col-md-12 text-center bg-primary"> <h2>FAQ</h2> <hr class="small"> <div class="row"> <div class="col-md-12 col-sm-12"> <div class="service-item"> <h4> <strong>How is my data stored?</strong> </h4> <p> We don\'t store your chats. When you upload your chat, we analyze it and then drop the data. </p> </div> </div> </div> </div> </div>  </div> </div> <div ng-if="fileUploaded == true"> <div class="row"> <div class="col-md-offset-3 col-md-6 text-center header2"> <h1>#<b>group</b>Stats.io </h1> <span id="beta"> BETA </span> <div> <h4>Understand your friends. Analyze your Whatsapp chat history.</h4> </div> <div class="btn bg-primary btn-lg" ng-file-select="onFileSelect($files,$scope)">Upload another Chat </div> </div> </div> <div ng-if="loadingSpinner == true"> <div class="row"> <div class="col-md-offset-3 col-md-6 text-center header"> <div class="sk-double-bounce"> <div class="sk-child sk-double-bounce1"></div> <div class="sk-child sk-double-bounce2"></div> </div> </div> </div> </div> <section> <div class="row"> <div class="col-md-offset-2 col-md-8 services2"> <div ng-repeat="chartConfig in data.charts"> <highchart config="data.charts[$index]"></highchart> <br> </div> </div> </div> <div class="row"> <div class="col-md-offset-2 col-md-8 services2 text-center"> <a ng-href="whatsapp://send?text={{encodedUrl}}" data-action="share/whatsapp/share" class="btn btn-success btn-lg"><i class="fa fa-whatsapp"></i> Share on Whatsapp</a> <div class="btn bg-primary btn-lg" ng-file-select="onFileSelect($files,$scope)">Analyze another Chat</div> </div> </div> </section> <section> <div class="row bg-primary services2"> <div class="col-md-offset-2 col-md-8" ng-if="!feedbackSent"> <h3>We love feedback, tell us what you think...</h3> <form name="sentMessage" id="contactForm" novalidate ng-submit="sendFeedback()"> <div class="row control-group"> <div class="form-group floating-label-form-group controls"> <textarea rows="5" class="form-control" placeholder="What graphs did you like? What surprised you? What would you like to see? What didn\'t you like?" id="message" required data-validation-required-message="Please enter a message." aria-invalid="false" ng-model="feedback"></textarea> <p class="help-block text-danger"></p> </div> </div> <br> <div class="row"> <div class="form-group text-center"> <button type="submit" class="btn btn-success btn-lg">Send</button> </div> </div> </form> </div> <div class="col-md-offset-2 col-md-8 text-center" ng-if="feedbackSent"> <h3>Thank you for your feedback!</h3> </div> </div> </section> </div> </div> ')}]);